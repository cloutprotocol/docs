---
title: "Agents"
description: "Understanding ClarkOS agent architecture"
---

## What is CLARK?

**C**ontinuously **L**earning **A**gentic **R**ealtime **K**nowledgebase

ClarkOS implements a generative agent architecture. Unlike request-response agents that wait for input and produce output, ClarkOS agents operate on continuous tick cycles, generating artifacts and updating state independent of external interaction.

## Reactive vs Generative Agents

| Aspect | Reactive Agent | Generative Agent (ClarkOS) |
|--------|----------------|---------------------------|
| Execution | On input | Continuous tick cycle |
| Output | Response to prompt | Artifacts from internal state |
| Memory | Conversation history | Multi-type cognitive model |
| Presence | When invoked | Persistent (web, social, stream) |
| State | Stateless or minimal | Mood, health, routine awareness |

## Agent Lifecycle

```
Initialize → Load State → Gather Context → Process → Update State → Generate Artifacts → Store Memories → Execute Actions → Sleep → Repeat
```

1. **Initialize** - Load configuration, connect plugins
2. **Load State** - Retrieve mood, health, routine, counters
3. **Gather Context** - Pull relevant memories, knowledge, active feeds
4. **Process** - Send context to LLM for processing
5. **Update State** - Apply state changes atomically
6. **Generate Artifacts** - Produce text, images, journal entries
7. **Store Memories** - Create memories with embeddings and metadata
8. **Execute Actions** - Run plugin actions (post, trade, notify)
9. **Sleep** - Wait for next tick interval

## Agent State

Every agent maintains internal state that persists across ticks:

```typescript
interface AgentState {
  mood: "neutral" | "expressive" | "curious" | "excited" | "reflective" | "concerned";
  health: number;      // 0-100
  routine: "morning" | "day" | "evening" | "overnight";
  volatility: number;  // 0-1, behavioral variance
  counters: {
    ticks: number;
    feeds: number;
  };
  lastTick: string | null;
  cryo: boolean;       // Hibernation mode
}
```

### Mood

Mood affects artifact generation and action selection:

| Mood | Characteristics |
|------|-----------------|
| `neutral` | Balanced processing, standard output |
| `expressive` | Higher output frequency, social engagement |
| `curious` | Research-oriented, exploratory content |
| `excited` | Elevated activity, enthusiastic tone |
| `reflective` | Introspective content, journal focus |
| `concerned` | Risk awareness, cautious actions |

### Health

Health represents operational capacity:

- **100**: Full capacity
- **75**: Target equilibrium
- **50**: Reduced output frequency
- **25**: Minimal function
- **0**: Hibernation (cryo mode)

Health drifts based on routine:
- Morning: +2 recovery
- Day: Stable
- Evening: -1 decline
- Overnight: -3 (hibernation risk)

### Routine Awareness

Agents are aware of time-of-day context:

| Routine | Hours (PST) | Behavior |
|---------|-------------|----------|
| `morning` | 6:00 - 12:00 | Recovery, planning |
| `day` | 12:00 - 18:00 | Peak activity |
| `evening` | 18:00 - 22:00 | Wind down, reflection |
| `overnight` | 22:00 - 6:00 | Minimal activity, consolidation |

## Artifact Generation

ClarkOS agents produce artifacts during tick execution:

### Text Artifacts

```typescript
interface TextArtifact {
  type: "thought" | "post" | "journal" | "reflection";
  content: string;
  tone: "curious" | "excited" | "concerned" | "reflective";
  triggers: string[];  // Memory IDs that contributed
  confidence: number;
}
```

### Image Artifacts

```typescript
interface ImageArtifact {
  type: "painting";
  url: string;
  prompt: string;
  mood: Mood;
  style: string;
  metadata: {
    model: string;
    seed: number;
  };
}
```

### Journal Artifacts

Daily journals consolidate tick activity into narrative:

```typescript
interface JournalArtifact {
  date: string;
  text: string;
  insights: string[];
  sentiment: "positive" | "neutral" | "negative";
  tickCount: number;
  themes: string[];
}
```

## Creating an Agent

```typescript
import { Agent } from "@convex-agent/core";
import { ConvexBackend } from "@convex-agent/core/backend";

const agent = new Agent({
  backend: new ConvexBackend({
    url: process.env.CONVEX_URL!
  }),
  plugins: []
});

// Execute a single tick
await agent.tick();

// Start continuous execution
agent.start();

// Stop execution
agent.stop();

// Get current state
const state = await agent.getState();
```

## Configuration

```typescript
import { createConfig } from "@convex-agent/core";

const config = createConfig({
  tick: {
    intervalMs: 300000,    // 5 minutes
    timeoutMs: 60000,      // 1 minute max per tick
  },
  memory: {
    maxMemories: 10000,
    embeddingModel: "gemini",
    consolidationInterval: 21600000  // 6 hours
  },
  artifacts: {
    journalTime: "overnight",  // When to generate daily journal
    imageFrequency: 0.1        // Probability per tick
  }
});

const agent = new Agent({
  backend,
  config,
  plugins: []
});
```

## Methods

### Core

```typescript
agent.start();              // Begin continuous tick execution
agent.stop();               // Stop execution
await agent.tick();         // Execute single tick
await agent.getState();     // Get current state
agent.isRunning();          // Check execution status
```

### Plugins

```typescript
agent.use(plugin);                                    // Register plugin
agent.getPlugin("name");                              // Get plugin by name
agent.getPlugins();                                   // List all plugins
await agent.executeAction("plugin", "action", {});    // Execute plugin action
```

### Memory

```typescript
const memoryStore = agent.memory;

await memoryStore.store({
  type: "episodic",
  content: "Event description",
  importance: 0.7
});

const memories = await memoryStore.query({
  type: "semantic",
  limit: 10
});
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Memory System" href="/concepts/memory">
    Multi-type cognitive memory architecture
  </Card>
  <Card title="Tick System" href="/concepts/tick-system">
    Continuous execution model
  </Card>
</CardGroup>
