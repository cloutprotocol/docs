---
title: "Agent SDK"
description: "TypeScript SDK for building ClarkOS agents"
---

The `@convex-agent/core` package provides the main `Agent` class for building autonomous agents.

## Installation

```bash
npm install @convex-agent/core
```

## Agent Class

### Constructor

```typescript
import { Agent } from "@convex-agent/core";
import { ConvexBackend } from "@convex-agent/core/backend";

const agent = new Agent({
  backend: new ConvexBackend({
    url: process.env.CONVEX_URL!
  }),
  plugins: []
});
```

### Options

```typescript
interface AgentOptions {
  backend: Backend;
  config?: Partial<AgentConfig>;
  plugins?: Plugin[];
}

interface AgentConfig {
  tick: {
    intervalMs: number;    // Default: 300000 (5 min)
    timeoutMs: number;     // Default: 60000 (1 min)
  };
  memory: {
    maxMemories: number;
    embeddingModel: string;
  };
}
```

## Methods

### Lifecycle

```typescript
// Start automatic tick execution
agent.start();

// Stop automatic tick execution
agent.stop();

// Check if running
const isRunning = agent.isRunning();
```

### Tick Execution

```typescript
// Execute a single tick
const result = await agent.tick();

// Result structure
interface TickResult {
  success: boolean;
  state: AgentState;
  summary?: string;
  detail?: string;
  artifacts?: unknown[];
  error?: string;
}
```

### State Management

```typescript
// Get current state
const state = await agent.getState();

// State structure
interface AgentState {
  mood: Mood;
  health: number;
  routine: Routine;
  volatility: number;
  counters: { ticks: number; feeds: number };
  lastTick: string | null;
  cryo: boolean;
}
```

### Plugin Management

```typescript
// Register a plugin
agent.use(myPlugin);

// Get a plugin by name
const plugin = agent.getPlugin("analytics");

// Get all plugins
const plugins = agent.getPlugins();

// Execute a plugin action
const result = await agent.executeAction("pluginName", "actionName", {
  param: "value"
});
```

### Memory Access

```typescript
// Access the memory store
const memoryStore = agent.memory;

// Store a memory
await memoryStore.store({
  type: "episodic",
  content: "Event description",
  scope: "short_term",
  importance: 0.7,
  salience: 0.5,
  valence: 0,
  confidence: 0.8,
  tags: ["event"],
  sourceType: "tick"
});

// Query memories
const memories = await memoryStore.query({
  type: "semantic",
  limit: 10
});
```

### Knowledge Access

```typescript
// Access the knowledge store
const knowledgeStore = agent.knowledge;

// Store knowledge
await knowledgeStore.store({
  type: "news",
  textExcerpt: "Article content...",
  source: "coindesk"
});

// Query knowledge
const items = await knowledgeStore.query({
  type: "news",
  limit: 20
});
```

## Types

### Mood

```typescript
type Mood =
  | "neutral"
  | "expressive"
  | "curious"
  | "excited"
  | "reflective"
  | "concerned";
```

### Routine

```typescript
type Routine =
  | "morning"    // 6am - 12pm
  | "day"        // 12pm - 6pm
  | "evening"    // 6pm - 12am
  | "overnight"; // 12am - 6am
```

### MemoryType

```typescript
type MemoryType =
  | "episodic"    // Specific events
  | "semantic"    // Facts and concepts
  | "procedural"; // Learned patterns
```

### MemoryScope

```typescript
type MemoryScope =
  | "short_term"  // Recent, may decay
  | "working"     // Active processing
  | "long_term";  // Permanent storage
```

## Example Usage

```typescript
import { Agent } from "@convex-agent/core";
import { ConvexBackend } from "@convex-agent/core/backend";

// Create backend
const backend = new ConvexBackend({
  url: process.env.CONVEX_URL!
});

// Create agent with plugin
const agent = new Agent({
  backend,
  plugins: [
    {
      name: "logger",
      version: "1.0.0",
      onTick(context) {
        console.log(`Tick: mood=${context.state.mood}, health=${context.state.health}`);
      }
    }
  ]
});

// Run a tick
const result = await agent.tick();
console.log("Tick result:", result);

// Get state
const state = await agent.getState();
console.log("Current state:", state);

// Start automatic execution
agent.start();

// Later: stop
agent.stop();
```

## SDK Roadmap

Current implementation:
- Agent class with tick/start/stop
- Plugin registration and execution
- Memory store interface
- Knowledge store interface

Expanding to include:
- Event emitter for state changes
- Consciousness processing integration
- Advanced memory operations (dedup, linking)
- Configuration validation with Zod

## Next Steps

<CardGroup cols={2}>
  <Card title="Memory Store" href="/api-reference/sdk/memory-store">
    Memory system reference
  </Card>
  <Card title="Plugins SDK" href="/api-reference/sdk/plugins">
    Plugin development reference
  </Card>
</CardGroup>
